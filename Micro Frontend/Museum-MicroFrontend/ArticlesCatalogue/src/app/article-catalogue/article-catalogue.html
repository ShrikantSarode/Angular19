<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="Catalogue mt-5 mb-5">
      <div class="container-fluid">
        <div class="row">
          <div class="col-6">
            <span class="fs-1">Articles Catalogue</span>
          </div>

          <div class="col-6 d-flex justify-content-end">
            <span>Hey User!</span>
          </div>
        </div>
      </div>

      <div class="container mt-5">
        <div class="row">
          <div class="col-8">
            <h3>The Art Hunt</h3>
          </div>

          <div class="col-2 d-flex justify-content-end mb-5">
            <button
              class="btn btn-warning ms-2"
              type="button"
              data-bs-toggle="offcanvas"
              data-bs-target="#offcanvasWithBothOptions"
              aria-controls="offcanvasWithBothOptions"
            >
              <span class="text-dark">ðŸ›’ Inventory</span>
            </button>

            <div
              class="offcanvas offcanvas-start"
              id="offcanvasWithBothOptions"
              aria-labelledby="offcanvasWithBothOptionsLabel"
              tabindex="-1"
              data-bs-scroll="true"
              data-bs-backdrop="false"
            >
              <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel">
                  Remaining Stock
                </h5>
                <button
                  type="button"
                  class="btn-close text-reset"
                  data-bs-dismiss="offcanvas"
                  aria-label="Close"
                ></button>
              </div>
              <div class="offcanvas-body">
                <!-- Optional: quick inventory view -->
                <table class="table table-dark align-middle">
                  <thead>
                    <tr>
                      <th>Art</th>
                      <th class="text-end">Available</th>
                      <th class="text-end">In Cart</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let art of artItems">
                      <td>{{ art.artName }}</td>
                      <td class="text-warning">
                        {{
                          Math.max(
                            (art.remainingStock || 0) - (art.quantity || 0),
                            0
                          )
                        }}
                      </td>
                      <td class="text-end">{{ art.quantity || 0 }}</td>
                    </tr>
                  </tbody>
                </table>
                <!-- <p class="text-muted small mb-0">
              * Available = Stock - In Cart (local view only)
            </p> -->
              </div>
            </div>
          </div>

          <div class="col-2 d-flex justify-content-end mb-5">
            <button class="btn btn-success" (click)="onCheckedOut()">
              CheckOut
            </button>
          </div>
        </div>

        <!-- paragraph -->
        <p>
          This piece presents a harmonious blend of color and form, where each
          element contributes to a balanced visual experience. The composition
          draws the eye across the canvas with fluid motion, using texture and
          contrast to evoke depth and emotion. Whether abstract or
          representational, the artwork invites viewers to interpret its meaning
          through personal reflection, offering a quiet space for imagination
          and thought.
        </p>

        <!-- heading -->
        <h3 class="text-center">Artworks</h3>

        <div class="art-list">
          <div class="art-items container">
            <div class="row d-flex justify-content-center">
              <div class="col-12">
                <div
                  class="art-details d-flex justify-content-start align-items-center"
                >
                  <table
                    class="table table-bordered table-dark table-striped text-center"
                  >
                    <thead>
                      <tr>
                        <th>Image</th>
                        <th>Name</th>
                        <th>Price</th>
                        <th>Description</th>
                        <th>Quantity</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let art of artItems">
                        <td>
                          <img
                            [src]="art.image"
                            [alt]="art.artName"
                            width="100"
                          />
                        </td>
                        <td>{{ art.artName }}</td>
                        <td>{{ art.price }}</td>
                        <td>{{ art.description }}</td>
                        <td>
                          <div
                            class="mt-3 d-flex flex-column align-items-center"
                          >
                            <div class="d-flex align-items-center">
                              <button
                                class="btn btn-danger m-2"
                                *ngIf="art.quantity > 0"
                                (click)="decrementQuantity(art)"
                              >
                                -
                              </button>

                              <span class="art-quantity p-3 m-2">{{
                                art.quantity
                              }}</span>

                              <button
                                class="btn btn-success"
                                (click)="incrementQuantity(art)"
                                [disabled]="
                                  art.quantity >= (art.remainingStock || 0)
                                "
                                [attr.aria-disabled]="
                                  art.quantity >= (art.remainingStock || 0)
                                    ? true
                                    : null
                                "
                                [title]="
                                  art.quantity >= (art.remainingStock || 0)
                                    ? 'No more stock available'
                                    : 'Increase quantity'
                                "
                              >
                                +
                              </button>
                            </div>

                            <small class="text-danger">
                              Remaining:
                              {{
                                Math.max(
                                  (art.remainingStock || 0) -
                                    (art.quantity || 0),
                                  0
                                )
                              }}
                            </small>

                            <small
                              *ngIf="(art.remainingStock || 0) === 0"
                              class="text-warning"
                            >
                              Out of stock
                            </small>

                            <small
                              *ngIf="
                                (art.remainingStock || 0) -
                                  (art.quantity || 0) >
                                  0 &&
                                (art.remainingStock || 0) -
                                  (art.quantity || 0) <=
                                  2
                              "
                              class="text-warning"
                            >
                              Low stock
                            </small>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <!-- /.art-details -->
              </div>
            </div>
          </div>
        </div>
        <!-- /.art-list -->
      </div>
    </div>
  </body>
</html>
